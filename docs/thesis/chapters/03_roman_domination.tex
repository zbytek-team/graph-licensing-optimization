\chapter{Związek z dominowaniem w grafach}
\label{chap:roman_domination}
\section{Dominowanie - podstawowe definicje}
Problematyka dominowania w grafach jest dobrze zbadana i szeroko opisana w literaturze~\cite{haynes1998domination}.
W szczególności znane są klasyczne definicje zbioru dominującego oraz liczby dominowania, które stanowią punkt odniesienia dla dalszych analiz.
Niech $G=(V,E)$ będzie grafem nieskierowanym.
Zbiorem dominującym nazywamy podzbiór $D \subseteq V$ taki, że każdy wierzchołek spoza $D$ ma co najmniej jednego sąsiada w $D$:
\begin{equation}
  \forall v \in V \setminus D \;\; \exists\, u \in D : \{u,v\} \in E ,
  \label{eq:dominating_set_def}
\end{equation}
gdzie:
\begin{itemize}
  \item $V$ - zbiór wierzchołków grafu,
  \item $E$ - zbiór krawędzi grafu,
  \item $D \subseteq V$ - zbiór dominujący,
  \item $u,v \in V$ - wierzchołki grafu,
  \item $\{u,v\}\in E$ - krawędź łącząca wierzchołki $u$ i $v$.
\end{itemize}


Najmniejszą moc zbioru dominującego oznaczamy symbolem $\gamma(G)$ i nazywamy liczbą dominowania:
\begin{equation}
  \gamma(G) = \min \{\, |D| : D \subseteq V \,\},
  \label{eq:domination_number}
\end{equation}
gdzie:
\begin{itemize}
  \item $\gamma(G)$ - liczba dominowania grafu $G$,
  \item $D$ - zbiór dominujący w grafie $G$,
  \item $V$ - zbiór wierzchołków grafu,
  \item $|D|$ - moc zbioru $D$.
\end{itemize}



Z punktu widzenia rozważanego problemu zakupu licencji, podstawowe założenie jest następujące:
jeśli potraktujemy osoby kupujące licencje jako zbiór \(D\), a krawędzie grafu jako relacje
umożliwiające udostępnianie licencji, wówczas warunek dominowania opisany równaniem~(\ref{eq:dominating_set_def}) określa sytuację,
w której każdy użytkownik spoza $D$ ma znajomego w~$D$, a zatem uzyskuje dostęp do usługi.
Gdyby wszystkie licencje były identyczne i pozwalały obsłużyć dowolną liczbę sąsiadów,
minimalizacja kosztu sprowadzałaby się do wyznaczenia liczby dominowania~(\ref{eq:domination_number}).
W praktyce jednak występują różne typy licencji oraz limity
współużytkowników, co czyni problem znacznie bardziej złożonym.

Należy zauważyć, że najmniejszy zbiór dominujący nie musi być jednoznaczny.
W części przypadków można w grafie znaleźć kilka różnych najmniejszych zbiorów dominujących.
Wynika to bezpośrednio z definicji liczby dominowania~(\ref{eq:domination_number}),
która określa jedynie minimalną moc zbioru dominującego, a nie jego unikalność.
Często bywa tak, że graf ma wiele różnych zbiorów dominujących o rozmiarze równym $\gamma(G)$,
tak jak przedstawiono na rysunku~\ref{fig:dominatingexample}, gdzie trzy różne zbiory wierzchołków są minimalne ale tylko dwa są najmniejsze.
Problem znajdowania $\gamma(G)$ jest jednak dobrze określony i należy do klasy problemów NP-trudnych. Jego wersja decyzyjna sformułowana jest następująco: dla zadanego grafu $G$ oraz liczby całkowitej $k$ pytamy, czy istnieje zbiór dominujący o rozmiarze co najwyżej $k$. Jest to klasyczny problem NP-zupełny \cite{wikiDominatingSet, POUREIDI2023106363, PANDA2023337}. Oznacza to, że najprawdopodobniej (przy założeniu $P \neq NP$) nie istnieje algorytm wielomianowy rozwiązujący ten problem w ogólności. W praktyce stosuje się zatem algorytmy przybliżone lub ogranicza analizę do specjalnych klas grafów, dla których problem staje się prostszy. Znane są między innymi efektywne algorytmy zachłanne, które zapewniają rozwiązanie przybliżone z gwarantowanym współczynnikiem. Przykładem jest prosty algorytm zachłanny wybierający kolejno wierzchołki do zbioru dominującego, osiągający przybliżenie rzędu $O(\ln n)$.


\begin{figure}[H]
  \centering
  \includegraphics[width=1\textwidth]{assets/dominating-set-example.png}
  \caption[Przykładowe zbiory dominujące]{%
    Przykładowe zbiory dominujące (wyróżnione na czerwono).
    \textbf{(a)}~Minimalny zbiór dominujący o mocy~3.
    \textbf{(b)}-\textbf{(c)}~Dwa różne minimalne i najmniejsze zbiory dominujące, gdzie
    \(\gamma(G)=2\).  Każdy wierzchołek nieczerwony ma sąsiada czerwonego.
  }
  \label{fig:dominatingexample}
\end{figure}

Wiadomo jednak, że nie da się w ogólności przekroczyć bariery logarytmicznej. Problem zbioru dominującego jest APX-trudny, a dokładniej log-APX-zupełny \cite{POUREIDI2023106363}. Co więcej, nawet na bardzo ograniczonych grafach, np. grafach o maksymalnym stopniu 3 (grafy kubiczne), problem pozostaje NP-trudny i APX-zupełny \cite{ALIMONTI2000123}. Berman i Fujito (1999) wykazali m.in. NP-trudność pewnych wariantów dominowania w grafach o ograniczonym stopniu \cite{BermanFujitoThreeDegree}, co potwierdza, że zasadnicza trudność problemu dominowania jest obecna już w stosunkowo prostych strukturach.


\section{Dominowanie rzymskie a licencje grupowe}

Dominowanie rzymskie to wariant problemu dominowania, w którym każdemu wierzchołkowi przypisuje się jedną z trzech wartości: 0, 1 lub 2. Wierzchołek o wartości 1 dominuje wyłącznie samego siebie, natomiast wierzchołek o wartości 2 dominuje zarówno siebie, jak i wszystkich swoich sąsiadów. Wymaga się przy tym, aby każdy wierzchołek o wartości 0 był sąsiadem co najmniej jednego wierzchołka oznaczonego wartością 2. Formalnie, funkcja dominowania rzymskiego na grafie $G=(V,E)$ to funkcja $f: V \to \{0,1,2\},$ spełniająca warunek, że dla każdego wierzchołka $v$ z $f(v) = 0$ istnieje sąsiad $u \in V$ taki, że $f(u) = 2$ \cite{Favaron2009}. Minimalizacja sumy wartości $f(v)$ po wszystkich $v \in V$ prowadzi do zdefiniowania tzw. liczby dominowania rzymskiego grafu, oznaczanej $\gamma_R(G)$.

Terminologia i metafora związana z dominowaniem rzymskim wywodzą się z legendy o obronie granic imperium rzymskiego. Zakładano w niej, że w każdej osadzie można umieścić pewną liczbę jednostek wojskowych. Osada z dwiema jednostkami była w stanie bronić się samodzielnie i jednocześnie wysłać wsparcie do sąsiedniej osady. Lokacja z jedną jednostką potrafiła bronić tylko siebie, a miejscowości pozbawione jednostek militarnych wymagała ochrony z zewnątrz. W tej metaforze graf reprezentuje system osad i połączeń między nimi, a etykiety 0, 1 i 2 odpowiadają decyzjom o rozmieszczeniu wojsk. Koncepcję dominowania rzymskiego wprowadzili do teorii grafów Cockayne i współpracownicy w 2004 roku \cite{Cockayne2004}.


W kontekście problemu optymalnego zakupu licencji w grafach reprezentujących sieci społecznościowe interpretacja jest bezpośrednia. Wartość $f(v)=2$ odpowiada użytkownikowi $v$, który nabywa licencję grupową i zapewnia dostęp zarówno sobie, jak i co najmniej jednemu ze swoich sąsiadów. Wartość $f(v)=1$ oznacza użytkownika posiadającego licencję indywidualną, pokrywającą wyłącznie jego samego. Natomiast $f(v)=0$ reprezentuje użytkownika bez własnej licencji, który musi polegać na pokryciu przez sąsiada z wartością 2. Warunek dominowania rzymskiego, zgodnie z którym każdy wierzchołek z etykietą 0 ma sąsiada z etykietą 2, gwarantuje dokładnie to, co w naszym modelu jest wymagane: każdy użytkownik bez licencji ma znajomego z licencją grupową, który może podzielić się z nim dostępem. W ten sposób każda funkcja $f:V \to \{0,1,2\}$ spełniająca warunki dominowania rzymskiego wyznacza dopuszczalną strategię licencyjną w rozważanej sieci.


Waga funkcji dominowania rzymskiego definiowana jest jako $w(f) = \sum_{v \in V} f(v)$, czyli suma przypisanych wartości. Liczba dominowania rzymskiego $\gamma_R(G)$ to najmniejsza możliwa waga funkcji dominowania rzymskiego dla grafu $G$. Jeśli przyjmiemy, że koszt licencji indywidualnej wynosi 1, a grupowej 2, to minimalizacja kosztu w naszym problemie pokrywa się z zagadnieniem znalezienia funkcji dominowania rzymskiego o najmniejszej wadze. Cel znalezienia jak największego sumarycznego kosztu $C = |I| + 2|H|$ jest zatem równoważny minimalizacji $w(f)$, gdy utożsamimy $|I|$ z liczbą wierzchołków o etykiecie 1, a $|H|$ o etykiecie 2. Należy jednak podkreślić, że pełna równoważność z dominowaniem rzymskim zachodzi tylko wtedy, gdy liczba sąsiadów dowolnego wierzchołka nie przekracza maksymalnej liczby użytkowników dopuszczonych w planie grupowym. Jak wspomniano wcześniej przy omawianiu parametrów $m$ i $k$, nasze ujęcie wprowadza dodatkowe ograniczenie pojemności - wierzchołek dla którego funkcja $f$ przyjmuje wartość 2 może pokrywać jedynie ograniczoną liczbę sąsiadów. Problem optymalnego zakupu licencji jest więc uogólnieniem dominowania rzymskiego, dostosowanym do praktycznych limitów występujących w planach subskrypcyjnych.

W przypadku innych modeli cenowych, dominowanie rzymskie stanowi nadal użyteczną metaforę, choć nie oddaje w sposób wystarczający struktury kosztów. Gdy $p \neq 2$, możemy rozważyć ogólniejsze przypisania wag, w których etykieta odpowiada rzeczywistemu kosztowi planu. Przykładowo, gdy $p=3$, to licencja grupowa ma koszt równy trzem jednostkom, co nie mieści się w klasycznym schemacie $\{0,1,2\}$. W literaturze zaproponowano rozszerzenia pozwalające modelować takie sytuacje, m.in. $k$-dominowanie rzymskie, gdzie dopuszcza się wartości $\{0,1,\dots,k\}$ \cite{CHAUDHARY2024301}, czy też dominowanie rzymskie z wagami \cite{Ghaffari2020}. Warianty te pozwalają odwzorować przypadki, w których dostępne są plany o różnych kosztach i różnej pojemności, np. licencja droższa, ale umożliwiająca współdzielenie w większej grupie. W tym sensie uogólnienia dominowania rzymskiego są bliższe rzeczywistemu problemowi optymalizacji kosztów licencji niż klasyczna wersja ograniczona do wartości 0, 1 i 2.

Na potrzeby tej pracy nie jest jednak konieczne wchodzenie w szczegółowe odmiany dominowania rzymskiego. Wystarczy zauważyć, że w analizowanym modelu schemat pozostaje taki sam jak w klasycznej wersji, a jedyną różnicą jest koszt przypisywany wierzchołkom o etykiecie $2$. W zależności od przyjętego modelu cenowego wartość ta może wynosić $p=2$, ale równie dobrze $p=1.5$ czy $p=3$. Konstrukcja funkcji dominowania rzymskiego oraz sam podział na etykiety $\{0,1,2\}$ nie ulega zmianie. Innymi słowy, dominowanie rzymskie dostarcza prostego i intuicyjnego opisu sytuacji.

Prosty przykład zastosowania dominowania rzymskiego można przedstawić na grafie typu gwiazda. Centralny wierzchołek $A$ jest połączony z liśćmi $B, C, D, E$. Najlepszą strategią jest, aby $A$ wykupił licencję grupową i udostępnił ją wszystkim swoim sąsiadom. W modelu oznacza to $f(A)=2$, a dla każdego liścia $f(B)=f(C)=f(D)=f(E)=0$. Warunek dominowania rzymskiego jest spełniony, ponieważ każdy liść, gdzie funkcja $f$ przyjmuje wartość 0 ma sąsiada $A$, który dla tej samej funkcji przejmuje wartość 2. Waga funkcji wynosi wówczas $w(f)=2$ - odpowiada to kosztowi jednej licencji grupowej obsługującej całą pięcioosobową grupę.

Dla porównania można rozważyć inne strategie. Jeśli każdy wierzchołek kupiłby licencję indywidualną, wówczas $w(f)=5$ co jest równoznaczne kosztowi pięciu licencji indywidualnych. Jeśli centralny wierzchołek kupiłby tylko licencję indywidualną ($f(A)=1$), a liście pozostałyby bez dostępu ($f(B)=f(C)=f(D)=f(E)=0$), warunek nie byłby spełniony - żaden liść nie miałby sąsiada przyjmującego dla funckji $f$ wartość 2.

Rysunek~\ref{fig:romandomatinonstarexamepl} ilustruje ten przykład i pokazuje, jak dominowanie rzymskie wskazuje optymalny wybór użytkownika pełniącego rolę lidera w centrum gwiazdy. W większych grafach kandydatów do roli właścicieli licencji grupowych jest więcej - ich odpowiedni dobór prowadzi już do właściwego problemu optymalizacji funkcji dominowania rzymskiego.


\begin{figure}[H]
  \centering
  \includegraphics[width=1\textwidth]{assets/stars.png}
  \caption{
    Kolory: biały = $0$, pomarańczowy = $1$, czerwony = $2$.
    \textbf{(a)}~Przypisanie optymalne (koszt 2).
    \textbf{(b)}~Wszyscy z $f=1$ (koszt 5).
    \textbf{(c)}~$A=1$, liście $f=0$ (niespełniony warunek).
  }
  \label{fig:romandomatinonstarexamepl}
\end{figure}


\section{Złożoność obliczeniowa problemu}

Dokładne dowody z zakresu złożoności obliczeniowej znajdują się w literaturze - np. pokazano NP-zupełność problemu dominowania rzymskiego poprzez redukcję z problemu pokrycia wierzchołków lub zbioru dominującego \cite{chambers2009}. W kontekście naszego modelu oznacza to, że optymalne wyznaczenie użytkowników kupujących poszczególne licencje jest obliczeniowo trudne dla dużych sieci. Innymi słowy, nie istnieje znany algorytm wielomianowy, który gwarantowałby znalezienie rozwiązania minimalnego kosztu dla dowolnej struktury grafu znajomości - w najgorszym przypadku liczba kombinacji rośnie wykładniczo wraz z liczbą wierzchołków.

Konsekwencją NP-trudności jest także brak prostego schematu aproksymacyjnego dla problemu minimalizacji kosztów licencji. Ponieważ problem dominowania (minimalnego zbioru dominującego) jest APX-zupełny (dla konkretnych rodzajów grafów) \cite{POUREIDI2023106363}, nie ma wielomianowego schematu aproksymacji (PTAS) gwarantującego dobre przybliżenie. Dla naszego problemu, który jest uogólnieniem dominowania, można oczekiwać podobnych ograniczeń - prawdopodobnie nie da się znaleźć w czasie wielomianowym rozwiązań bliższych optimum niż o czynnik $O(\ln n)$ w najgorszym przypadku. Proste heurystyki zachłanne mogą jednak dawać przyzwoite wyniki. Na przykład, heurystyka wybierająca iteracyjnie wierzchołek, który pokrywa najwięcej jeszcze niepokrytych sąsiadów (i dająca mu licencję grupową), jest jedną z implementacji algorytmu zachłannego dla zbioru dominującego i osiąga współczynnik $\approx (2 + \ln \Delta)$, gdzie $\Delta$ to maksymalny stopień grafu \cite{Kuhn2012NetworkAlgorithms}. W najgorszym razie jest to $O(\ln n)$, ale dla wielu grafów rzeczywiste wyniki są lepsze niż ta pesymistyczna granica z ograniczeniem. Ważnym faktem jest też to, że problem pozostaje trudny nawet dla grafów o niewielkich stopniach - np. wykazano, że dla grafów o stopniu nie większym niż cztery wyznaczenie najmniejszego zbioru dominującego jest problemem APX-zupełnym \cite{ALIMONTI2000123,POUREIDI2023106363}.
To implikuje, że ograniczenie maksymalnej liczby znajomych nie czyni problemu trywialnym. W kontekście subskrypcji oznacza to, że nawet w sieci gdzie każdy zna tylko kilka osób, optymalny dobór kto z kim powinien się połączyć we wspólnej licencji nadal może wymagać złożonych obliczeń.

Biorąc powyższe pod uwagę, w dalszej części badania główny nacisk zostanie położony na podejścia algorytmiczne, które biorą pod uwagę tę złożoność. Ponieważ nie istnieje wydajny algorytm dokładny dla ogólnego przypadku, rozważymy dwutorowo: (a) zastosowanie metod dokładnych dla umiarkowanych rozmiarów sieci oraz (b) zaprojektowanie i analizę algorytmów heurystycznych zdolnych dostarczać dobre rozwiązania dla większych sieci. W literaturze można już znaleźć próby wykorzystania technik optymalizacyjnych do problemu dominowania; przykładem jest praca Parra Inza i współautorów \cite{PARRAINZA2024926}, w której zagadnienie sformułowano jako ILP i uzupełniono heurystykami naprawczymi. Tego typu konstrukcję można zaadaptować do omawianego problemu, wprowadzając zmienne decyzyjne wskazujące wybór typu licencji dla każdego użytkownika oraz odpowiednie ograniczenia. Z drugiej strony, heurystyki takie jak algorytm zachłanny, metody lokalnego przeszukiwania czy metaheurystyki - np. algorytmy genetyczne lub symulowane wyżarzanie - pozwalają szybko eksplorować przestrzeń możliwych konfiguracji licencji.
